(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2295:(e,t,s)=>{Promise.resolve().then(s.bind(s,7761))},5749:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var a=s(5155);function i(){return(0,a.jsx)("header",{className:"bg-black/50 backdrop-blur-sm border-b border-red-500/20",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-4xl",children:"\uD83E\uDD4A"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Finish Finder"}),(0,a.jsx)("p",{className:"text-red-400 text-sm",children:"AI-Powered UFC Entertainment Analysis"})]})]}),(0,a.jsxs)("nav",{className:"hidden md:flex space-x-6",children:[(0,a.jsx)("a",{href:"/",className:"text-white hover:text-red-400 transition-colors",children:"Events"}),(0,a.jsx)("a",{href:"#predictions",className:"text-white hover:text-red-400 transition-colors",children:"Predictions"}),(0,a.jsx)("a",{href:"#stats",className:"text-white hover:text-red-400 transition-colors",children:"Fighter Stats"}),(0,a.jsx)("a",{href:"/admin",className:"text-white hover:text-red-400 transition-colors",children:"\uD83D\uDEE0️ Admin"})]})]})})})}},7761:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),i=s(2115);function n(){var e,t,s,n,l;let[r,d]=(0,i.useState)(null),[c,o]=(0,i.useState)([]),[x,h]=(0,i.useState)({pendingEvents:0,pendingFights:0}),[m,u]=(0,i.useState)(!1),[g,p]=(0,i.useState)(null);(0,i.useEffect)(()=>{v(),b(),w()},[]);let v=async()=>{try{let e=await fetch("/api/collect-data"),t=await e.json();d(t.data)}catch(e){console.error("Error checking status:",e),j("❌ Failed to check collection status")}},j=e=>{let t=new Date().toLocaleTimeString();o(s=>[...s,"[".concat(t,"] ").concat(e)])},b=async()=>{try{let s=await fetch("/api/run-predictions"),a=await s.json();if(a.success){var e,t;h({pendingEvents:(null==(e=a.data)?void 0:e.pendingEvents)||0,pendingFights:(null==(t=a.data)?void 0:t.pendingFights)||0})}}catch(e){console.error("Error checking prediction status:",e)}},f=async()=>{u(!0),j("\uD83E\uDD16 Generating AI predictions for pending events...");try{let i=await fetch("/api/run-predictions",{method:"POST"}),n=await i.json();if(n.success){var e,t,s,a;j("✅ Updated ".concat((null==(e=n.data)?void 0:e.fightsUpdated)||0," fights across ").concat((null==(t=n.data)?void 0:t.eventsProcessed)||0," events")),h({pendingEvents:(null==(s=n.data)?void 0:s.pendingEvents)||0,pendingFights:(null==(a=n.data)?void 0:a.pendingFights)||0}),await v(),await w()}else j("❌ Prediction run failed: ".concat(n.error||n.message))}catch(e){j("❌ Prediction run error: ".concat(e))}finally{u(!1)}},w=async()=>{try{let e=await fetch("/api/token-usage"),t=await e.json();t.success&&p(t.data)}catch(e){console.error("Error checking token usage:",e)}};return(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"\uD83D\uDEE0️ Data Operations"}),(0,a.jsx)("p",{className:"text-white/60 text-sm",children:"Collect fresh events and generate AI entertainment insights for upcoming fight cards."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:(null==r||null==(e=r.stats)?void 0:e.fighters)||0}),(0,a.jsx)("div",{className:"text-white/70 text-sm",children:"Fighters"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:(null==r||null==(t=r.stats)?void 0:t.events)||0}),(0,a.jsx)("div",{className:"text-white/70 text-sm",children:"Events"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:(null==r||null==(s=r.stats)?void 0:s.fights)||0}),(0,a.jsx)("div",{className:"text-white/70 text-sm",children:"Fights"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold ".concat((null==r?void 0:r.status)==="ready"?"text-green-400":(null==r?void 0:r.status)==="empty"?"text-red-400":"text-yellow-400"),children:(null==r||null==(n=r.status)?void 0:n.toUpperCase())||"UNKNOWN"}),(0,a.jsx)("div",{className:"text-white/70 text-sm",children:"Status"})]})]}),(null==r?void 0:r.lastUpdated)?(0,a.jsxs)("div",{className:"text-center text-white/40 text-xs",children:["Last updated: ",new Date(r.lastUpdated).toLocaleString()]}):null,(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\uD83D\uDCC8 AI Prediction Queue"}),(0,a.jsxs)("span",{className:"text-white/60 text-sm",children:[x.pendingEvents," events • ",x.pendingFights," fights"]})]}),(0,a.jsx)("p",{className:"text-white/60 text-sm",children:"Run the entertainment analysis prompt for events missing fun scores or AI breakdowns."}),(0,a.jsx)("button",{type:"button",onClick:f,disabled:m||0===x.pendingEvents,className:"w-full p-4 rounded-lg font-semibold transition-all ".concat(m?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:from-red-700 hover:to-orange-700"),children:m?"⏳ Generating predictions...":"⚙️ Run AI Predictions"}),(0,a.jsx)("p",{className:"text-white/50 text-xs",children:"Requires OPENAI_API_KEY. Processes fight cards in safe chunks to avoid overloading the API."})]})}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\uD83E\uDDEE Token Usage Summary"}),(0,a.jsx)("p",{className:"text-white/60 text-sm",children:"Track estimated OpenAI tokens consumed by prediction runs."})]}),g?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm text-white/70",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase text-white/40",children:"Prompt Tokens"}),(0,a.jsx)("div",{className:"font-semibold text-white",children:g.totals.promptTokens.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase text-white/40",children:"Completion Tokens"}),(0,a.jsx)("div",{className:"font-semibold text-white",children:g.totals.completionTokens.toLocaleString()})]})]}):(0,a.jsx)("div",{className:"text-white/40 text-sm",children:"No usage recorded yet."})]}),g?(0,a.jsxs)(a.Fragment,{children:[g.daily.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:"Last 7 Days"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 text-xs text-white/70",children:g.daily.map(e=>(0,a.jsxs)("div",{className:"bg-white/10 rounded px-3 py-2",children:[(0,a.jsx)("div",{className:"font-semibold text-white",children:e.tokens.toLocaleString()}),(0,a.jsx)("div",{className:"text-white/40",children:e.date})]},e.date))})]}):null,g.latest.length?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white",children:"Recent Runs"}),(0,a.jsx)("div",{className:"space-y-1 text-xs text-white/70",children:g.latest.map(e=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 bg-white/5 rounded px-3 py-2",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.eventName}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{children:[e.fightsProcessed," fights"]}),(0,a.jsxs)("span",{children:[e.totalTokensEstimated.toLocaleString()," tokens"]}),(0,a.jsx)("span",{className:"uppercase text-white/40",children:e.source}),(0,a.jsx)("span",{className:"text-white/40",children:new Date(e.createdAt).toLocaleString()})]})]},e.id))})]}):null]}):(0,a.jsx)("p",{className:"text-white/40 text-sm",children:"Run AI predictions from this dashboard or via the CLI to populate usage analytics."})]}),(null==r||null==(l=r.stats)?void 0:l.events)?(0,a.jsxs)("div",{className:"bg-green-900/20 border border-green-500/30 rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-400",children:"✅ Events Available"}),(0,a.jsxs)("p",{className:"text-white/70 text-sm",children:[r.stats.events," events • ",r.stats.fights," fights stored in the database."]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("a",{href:"/",className:"bg-green-600 text-white px-5 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"\uD83E\uDD4A View Events"}),(0,a.jsx)("button",{type:"button",onClick:async()=>{try{var e,t;let s=await fetch("/api/db-events"),a=await s.json();j("\uD83D\uDCCA Database events: ".concat((null==(e=a.data)?void 0:e.totalEvents)||0," events, ").concat((null==(t=a.data)?void 0:t.totalFighters)||0," fighters"))}catch(e){j("❌ Error checking database: ".concat(e))}},className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"\uD83D\uDCCA Refresh Stats"})]})]}):null,(0,a.jsxs)("div",{className:"bg-black/30 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Activity Logs"}),(0,a.jsx)("button",{type:"button",onClick:()=>o([]),className:"text-sm text-white/60 hover:text-white",children:"Clear"})]}),(0,a.jsx)("div",{className:"h-64 overflow-y-auto",children:0===c.length?(0,a.jsx)("div",{className:"text-white/40 text-center py-8",children:"No activity yet. Trigger a collection or prediction run to see updates."}):(0,a.jsx)("div",{className:"space-y-1",children:c.map((e,t)=>(0,a.jsx)("div",{className:"text-sm text-white/80 font-mono",children:e},t))})})]})]})}var l=s(5749),r=s(5704);let d=r.env.NEXT_PUBLIC_ADMIN_PASSWORD,c="ffp-admin-auth",o="true"===r.env.NEXT_PUBLIC_ENABLE_ADMIN;function x(){let[e,t]=(0,i.useState)(!d),[s,r]=(0,i.useState)(""),[x,h]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!d)return;let e=localStorage.getItem(c);e&&e===d&&t(!0)},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-red-900 to-black",children:[(0,a.jsx)(l.Y,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"\uD83D\uDEE0️ Admin Dashboard"}),(0,a.jsx)("p",{className:"text-white/70 text-lg",children:"Manage data collection, monitor system status, and configure settings"})]}),o?e?(0,a.jsxs)("div",{className:"space-y-4",children:[d?(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"button",onClick:()=>{localStorage.removeItem(c),t(!1),r("")},className:"text-sm text-white/60 hover:text-white underline",children:"Sign out"})}):null,(0,a.jsx)(n,{})]}):(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4 text-center",children:"\uD83D\uDD10 Enter Admin Password"}),(0,a.jsx)("p",{className:"text-white/60 text-sm mb-4 text-center",children:"This section is restricted. Please enter the admin password to continue."}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!d)return void t(!0);s===d?(t(!0),localStorage.setItem(c,d),h(null),r("")):h("Incorrect password. Please try again.")},className:"space-y-4",children:[(0,a.jsx)("input",{type:"password",value:s,onChange:e=>r(e.target.value),placeholder:"Admin password",className:"w-full rounded bg-black/40 border border-white/20 px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-red-500"}),x?(0,a.jsx)("p",{className:"text-sm text-red-400",children:x}):null,(0,a.jsx)("button",{type:"submit",className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors font-semibold",children:"Unlock"})]})]}):(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4 text-center",children:"ℹ️ Admin Tools Unavailable"}),(0,a.jsx)("p",{className:"text-white/60 text-sm text-center",children:"The data collection dashboard is disabled in the static GitHub Pages build. Run the project locally with server capabilities enabled to access admin features."})]})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=2295)),_N_E=e.O()}]);